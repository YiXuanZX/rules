{
  "dns": {
    "servers": [
      {"tag":"proxy_server_dns","type":"https","server":"doh.pub","domain_resolver":"hosts"},
      {"tag":"direct_dns","type":"https","server":"dns.alidns.com","domain_resolver":"hosts"},
      {"tag":"proxy_dns","type":"https","server":"cloudflare-dns.com","domain_resolver":"hosts","detour":"proxy"},
      {"tag":"local","type":"local"},
      {"tag":"fake-ip-dns-server","type":"fakeip","inet4_range":"198.18.0.0/15","inet6_range":"fc00::/64"},
      {"tag":"hosts","type":"hosts","predefined":{"dns.alidns.com":["223.5.5.5","223.6.6.6"],"doh.pub":["1.12.12.21","120.53.53.53"],"dns.google":["8.8.8.8","8.8.4.4"],"cloudflare-dns.com":["104.16.248.249","104.16.249.249"]}}
    ],
    "rules": [
      {"clash_mode":"Global","query_type":["SVCB","HTTPS"],"action":"reject"},
      {"clash_mode":"Global","query_type":["A","AAAA"],"server":"fake-ip-dns-server","rewrite_ttl":1},
      {"clash_mode":"Global","server":"proxy_dns"},
      {"clash_mode":"Direct","server":"direct_dns"},
      {"domain_suffix":["market.xiaomi.com"],"server":"direct_dns"},
      {"domain_suffix":["lancache.steamcontent.com"],"server":"proxy_dns"},
      {"query_type":"PTR","server":"local"},
      {"query_type":["SVCB","HTTPS"],"action":"reject"},
      {"query_type":["A","AAAA"],"server":"fake-ip-dns-server","rewrite_ttl":1},
      {"rule_set":"gfw","server":"proxy_dns"}
    ],
    "final": "direct_dns",
    "independent_cache": true,
    "cache_capacity": 4096
  },
  "route": {
    "rules": [
      {"domain":["Mijia Cloud"],"domain_suffix":["push.apple.com"],"rule_set":["telegram_ip"],"invert":true,"action":"sniff"},
      {"protocol":"dns","action":"hijack-dns"},
      {"udp_disable_domain_unmapping":true,"udp_connect":true,"action":"route-options"},
      {"clash_mode":"Global","outbound":"proxy"},
      {"clash_mode":"Direct","outbound":"direct"},
      {"domain":["abyss.cyapi.cn","ad.cyapi.cn","gather.colorfulclouds.net"],"action":"reject"},
      {"domain_suffix":["steamserver.net"],"outbound":"direct"},
      {"network":"icmp","outbound":"direct"},
      {"protocol":"quic","rule_set":"youtube","action":"reject"},
      {"ip_is_private":true,"rule_set":"private","outbound":"direct"},
      {"rule_set":"ai","outbound":"ai"},
      {"rule_set":["telegram","telegram_ip"],"outbound":"tg"},
      {"rule_set":["github","twitter","youtube","google","gfw"],"outbound":"proxy"},
      {"rule_set":"cn","outbound":"direct"},
      {"action":"resolve"},
      {"rule_set":"cn_ip","outbound":"direct"}
    ],
    "final": "proxy",
    "auto_detect_interface": true,
    "default_domain_resolver": "proxy_server_dns",
    "rule_set": [
      {"tag":"private","type":"remote","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-private.srs","download_detour":"proxy"},
      {"tag":"ai","type":"remote","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/ai.srs","download_detour":"proxy"},
      {"tag":"telegram","type":"remote","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-telegram.srs","download_detour":"proxy"},
      {"tag":"telegram_ip","type":"remote","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/telegramip.srs","download_detour":"proxy"},
      {"tag":"github","type":"remote","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-github.srs","download_detour":"proxy"},
      {"tag":"twitter","type":"remote","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-twitter.srs","download_detour":"proxy"},
      {"tag":"youtube","type":"remote","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-youtube.srs","download_detour":"proxy"},
      {"tag":"google","type":"remote","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-google.srs","download_detour":"proxy"},
      {"tag":"gfw","type":"remote","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/gfw.srs","download_detour":"proxy"},
      {"tag":"cn","type":"remote","url":"https://raw.githubusercontent.com/YiXuanZX/sing-box-geosite/main/rule/cn-additional-list-clash-classical.srs","download_detour":"proxy"},
      {"tag":"cn_ip","type":"remote","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/cnip.srs","download_detour":"proxy"}
    ]
  },
  "outbounds": [
    {"tag":"hk","type":"selector","outbounds":[]},
    {"tag":"sg","type":"selector","outbounds":[]},
    {"tag":"jp","type":"selector","outbounds":[]},
    {"tag":"us","type":"selector","outbounds":[]},
    {"tag":"eu","type":"selector","outbounds":[]},
    {"tag":"other","type":"selector","outbounds":[]},
    {"tag":"proxy","type":"selector","outbounds":["hk","sg","jp","us","eu","other"],"default":"hk"},
    {"tag":"direct","type":"selector","outbounds":["v4优先","v6优先"],"default":"v4优先"},
    {"tag":"ai","type":"selector","outbounds":["hk","sg","jp","us","eu","other"],"default":"us"},
    {"tag":"tg","type":"selector","outbounds":["hk","sg","jp","us","eu","other"],"default":"sg"},
    {"tag":"GLOBAL","type":"selector","outbounds":["hk","sg","jp","us","eu","other"],"default":"hk"},
    {"tag":"v4优先","type":"direct","domain_resolver":{"server":"local","strategy":"prefer_ipv4"}},
    {"tag":"v6优先","type":"direct","domain_resolver":{"server":"local","strategy":"prefer_ipv6"}}
  ],
  "inbounds": [
    {"tag":"tun-in","type":"tun","address":["172.19.0.1/30","fdfe:dcba:9876::1/126"],"stack":"system","auto_route":true,"auto_redirect":false,"platform":{"http_proxy":{"enabled":false,"server":"127.0.0.1","server_port":7890,"bypass_domain":["*zhihu.com","*zhimg.com","*jd.com","100ime-iat-api.xfyun.cn","*360buyimg.com"]}}},
    {"tag":"mixed-in","type":"mixed","listen":"127.0.0.1","listen_port":7890,"set_system_proxy":false}
  ],
  "log": {"level":"warn","timestamp":true},
  "experimental": {
    "cache_file": {"enabled":true,"store_fakeip":true,"store_rdrc":true},
    "clash_api": {
      "external_controller": "[::]:9090",
      "external_ui": "ui",
      "external_ui_download_url": "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages-cdn-fonts.zip",
      "external_ui_download_detour": "proxy"
    }
  }
}